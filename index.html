<!DOCTYPE html>
<html>
<title>True Balance</title>
<style>
	html, body {
    	margin: 0px;
	padding: 0px;
    	height: 100%;
	background-image: linear-gradient(to bottom, #202e44 0%, #202e44 40%, #ecf0f1 40%, #ecf0f1 100%);
    	background-size: cover;
    	background-repeat: no-repeat;
	align-content: center;
	}
	.header {
	text-align: center;
	font-family: Century Gothic;
	font-size: 40;
	color: white;		
	}
	.footer {
	position: fixed;
	left: 0;
	bottom: 0;
	width: 100%;
	color: black;
	text-align: center;
	padding: 10px;
	font-family: Arial;
	}
	.submitbtn {
	background-color: #23b7e5;
	height: 30px;
	width: 50%;
	color: white;
	border: none;
	text-decoration: none;
	}
	.txtbox {
	width: 50%;
	margin: 5px;
	border: 0;
	outline: 0;
	background: transparent;
	border-bottom: 1px solid #ecf0f1;
	}
	.currentbalance {
	text-align: center;
	color: white;
	font-size: 30;
	}
</style>

<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
</head>

<body>
	<div class="header">True Balance</div>
	<pre id='data' class="currentbalance"></pre>
	<form id="test-form">
		<a class="footer">version 1.16</a>
		<div class="form-control">
		  <input type="expense" name="expense" class="txtbox" id="expense" placeholder="Amount">
		</div>
		<div class="form-control">
		  <input type="note" name="note" class="txtbox" id="note" placeholder="Note">
		</div>
		<div>
		<button type="submit" id="submit"  class="submitbtn btn-primary">Submit</button>
		</div>
		<small class="text-muted confirm"></small>
	</form>
</body>

<script>
  const onDataLoaded = (data) => {
    const total = data.feed.entry.find((entry) => entry.title.$t == 'D2').content.$t
    document.getElementById('data').innerHTML = total
  }
</script>	
<script src="https://spreadsheets.google.com/feeds/cells/1IYOk1F3aN4d9_4I4z6edNZt-gVFIet6qOuz1IVF6d8A/1/public/basic?alt=json-in-script&callback=onDataLoaded"></script>	
<script>
	$(document).ready(function(){
	  $.fn.serializeObject = function()
		  {
		   var o = {};
		   var a = this.serializeArray();
		   $.each(a, function() {
			   if (o[this.name]) {
				   if (!o[this.name].push) {
					   o[this.name] = [o[this.name]];
				   }
				   o[this.name].push(this.value || '');
			   } else {
				   o[this.name] = this.value || '';
			   }
		   });
		   return o;
		  };
		var form = $('form#test-form'),
		  url = 'https://script.google.com/macros/s/AKfycbwlD47AJ3RWo0S5RuUJLxREY_n09ISeE0O5HXmw1oGt2JGW_k3U/exec';
		  form.submit(function(e){
			e.preventDefault();
		  var jqxhr = $.ajax({
			url: url,
			method: "GET",
			dataType: "json",
			data: form.serializeObject()
		  });
			$(".confirm").html("Successfully Submitted").css("font-size","12px");
		  });
		});
</script>
</html>
